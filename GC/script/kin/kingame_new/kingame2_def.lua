 -- 文件名　：kingame2_def.lua
-- 创建者　：zhangjunjie
-- 创建时间：2011-06-08 10:15:22
-- 描述：新家族副本定义

local preEnv = _G	 
setfenv(1, KinGame2) 

--setting的目录
BASEPATH = "\\setting\\kin\\kingame_new"

--boss的掉落表
DROPRATE_FILE = "\\setting\\npc\\droprate\\kin\\boss.txt"

--进入家族的自定义阵营
EXTENSION_CAMP_ID = 1;
--进入的最小等级
MIN_LEVEL = 80;
--当前server下最大的fb数量
MAX_GAME = 30;
--家族关卡的地图模板
MAP_TEMPLATE_ID	= 2087;
--新家族副本的关卡数
MAX_ROOM_NUM = 7;	
--一周能参加的最大次数
MAX_WEEK_DEGREE = 2;
--参加副本的最小人数
MIN_PLAYER = 8;	
--参加fb的最大人数
MAX_PLAYER = 60; -- TODO：这里要考虑一下改了人数，系统相应的和人数有关的都要改变	
--开始等待的时间
WAIT_TIME = 10 * 60;
--游戏的总共时间
MAX_TIME = 120 * 60;
--家族古金币的最大数量
MAX_GOLD_COIN = 1000;
--通过fb要通过的最小的房间数
MIN_PASS_ROOM_NUM = 4;
--相关任务变量，在2028基础上增加了几个,家族古金币之类的
TASK_GROUP_ID 			= 2028;		-- 家族任务变量groupid
TASK_NOW_WEEK_TIME		= 4;		-- 记录今天参加时间
TASK_GOLD_COIN			= 11;		-- 家族金币任务变量
TASK_GET_MEDICINE_TIME  = 12;		-- 上次领取药箱的时间

--家族声望的对应id
KIN_REPUTE_CAMP			= 4;
KIN_REPUTE_CALSS		= 1;


--给npc加的难度等级对应的buff技能id
PLAYER_LEVEL_BUFF_ID = 1715;
--玩家debuff的时间
PLAYER_DEBUFF_TIME = 60 * 60 * 2;
--吃书喝酒加的buff
PLAYER_ADD_BUFF_ID = 1729;
--吃书喝酒buff时间
PLAYER_BUFF_TIME = 15 * 60;

--开启关卡的钥匙
OPEN_KEY_ITEM = {18, 1, 106, 1, {bForceBind = 1, bTimeOut = 1}}

--家族钱箱gdpl
QIANXIANG_ITEM = {18,1,1332,1};

--家族勋章gdpl
KIN_XUNZHANG = {18,1,1333,1};

--对应药的gdpl
KIN_MEDICINE = 	
{
	[60] = {{18,1,1344,1},{18,1,1344,2},{18,1,1344,3}},
	[90] = {{18,1,1345,1},{18,1,1345,2},{18,1,1345,3}},
	[120] = {{18,1,1346,1},{18,1,1346,2},{18,1,1346,3}},	
}

KIN_MEDICINE_TIME = 24 * 60;--药箱24小时

--准备场到战斗场的pos
FIGHTSTATE_POS = {53696/32,114848/32};

--trap点开关的npc位置
TRAP_SWITCH_NPC_POS = 
{
	[1] = {[1] = {53344/32,114976/32}},
	[4] = {[1] = {50080/32,110208/32},[2] = {58144/32,118432/32}},	--1表示左边，2表示右边
	[5] = {[1] = {54176/32,107328/32},[2] = {59776/32,112256/32}},
	[6] = {[1] = {56064/32,106016/32},[2] = {58592/32,108672/32}},
	[7] = {[1] = {57856/32,104512/32}},	
}
--trap占位的npc位置,1/2/3/3房间一个trap进入点,4，5，6都是2个trap进入点，
TRAP_NPC_POS = 
{
	--1表示左边，2表示右边,4号房间的柱子是等怪物打完后刷出
	[1] = 
	{
		[1] = {{53504/32,114912/32},{53568/32,114976/32},{53632/32,115040/32},{53696/32,115104/32}},
	},
	[4] = 
	{
		[1] = {{51520/32,109024/32},{51584/32,109088/32},{51648/32,109152/32}},
		[2] = {{58848/32,117056/32},{58912/32,117120/32},{58976/32,117184/32},{59040/32,117248/32}},
	},	
	[5] = 
	{
		[1] = {{53760/32,107424/32},{53824/32,107360/32},{53888/32,107264/32},{53952/32,107200/32}},
		[2] = {{59904/32,112224/32},{59968/32,112288/32},{60032/32,112352/32}},
	},
	[6] = 
	{
		[1] = {{55968/32,106336/32},{56064/32,106240/32},{56160/32,106144/32}},
		[2] = {{58080/32,108736/32},{58176/32,108640/32},{58240/32,108544/32}},
	},
	[7] = 
	{
		[1] = {{58080/32,104352/32},{58144/32,104416/32}},
	},	
}

--开机关的时间
TRAP_SWITCH_DELAY = 10;
--刷boss前的特效圈
WAIT_NPC_TEMPLATEID = 2976;
--trap开关npc模板
nTrapSwitchNpcTemplateId = 9578;
--开启游戏npc
nOpenGameNpcTemplateId = 9577;
--trap npc模板
nTrapNpcTemplateId = 9548;
--怪物的最低等级
MIN_MONSTER_LEVEL = 90;

--每个房间的时间控制,以秒为单位
ROOM_TIME_LIMIT = 
{
	[1] = 720,
	[2] = 600,
	[3] = 360,
	[4] = 720,
	[5] = 720,
	[6] = 600,
	[7] = 900,
};

--进入点
ENTER_POS = 
{
	{51904/32,118272/32},
	{51712/32,117952/32},
	{52320/32,118048/32},
	{52128/32,118752/32},
}

--死亡重生点
DEATH_POS = {1649,3650}
--离开点
LEAVE_POS =
{	
	[26] = {1514, 3123},
	[25] = {1726, 3245},
	[29] = {1718, 4090},
	[24] = {1954, 3571},
	[28] = {1602, 3359},
	[27] = {1666, 3260},
	[23] = {1648, 3185},
}

--路路通飞的点
TRANSPORT_POS = 
{
	{"皓月岛",4,{58272/32,115104/32}},	
	{"骄阳岛",4,{52992/32,110144/32}},	
	{"知书坊",5,{54752/32,105568/32}},
	{"知礼阁",5,{59520/32,109568/32}},
	{"愚园",6,{57824/32,104768/32}},
}



TRAP_FIRE_SKILL_ID = 1723; --桥上释放的技能

TRAP_FIRE_CAST_DELAY = 5;	--桥上释放火焰的间隔

TRAP_FIRE_NPC_TEMPLATEID = 9590;	--火眼的模板id

--桥上的火眼pos
TRAP_FIRE_POS = 
{
	{58688/32,114368/32},
	{58656/32,113824/32},
	{58976/32,113792/32},
	{59104/32,113472/32},
	{59392/32,113408/32},
	{59392/32,113088/32},
	{59616/32,112992/32},
	{59584/32,112448/32},
	{53728/32,109600/32},
	{53824/32,109088/32},
	{54080/32,109056/32},
	{54176/32,108704/32},
	{54432/32,108576/32},
	{54240/32,108256/32},
	{54208/32,107904/32},
}  
   
--对应释放技能的pos
TRAP_FRIE_CAST_POS = 
{   
	{58528,114208},
	{58784,113920},
	{58880,113632},
	{59200,113600},
	{59264,113312},
	{59488,113216},
	{59456,112832},
	{59744,112640},
	{53536,109376},
	{53920,109216},
	{53984,108928},
	{54272,108832},
	{54336,108480},
	{54336,108096},
	{54080,108032},
}

--石子路火舌
TRAP_FIRE_LONG_SKILL_ID = 1725;

--石子路火舌pos
TRAP_FIRE_LONG_POS = 
{
	{54912/32,105728/32},	
	{59264/32,109600/32},
}
--石子路火舌释放点
TRAP_FIRE_LONG_CAST_POS = 
{
	{55520,106144},
	{58560,108928},
}

--游龙的npc模板id
YOULONG_NPC_ID  = 9588;	
--每个关卡完成后游龙的刷出地点
YOULONG_NPC_POS =
{
	[1] = {{54944/32,113632/32}},
	[2] = {},	
	[3] = {},
	[4] = {{52576/32,109120/32},{58944/32,115520/32}},
	[5] = {},
	[6] = {},
	[7] = {{59328/32,103072/32}},
};

--随机事件的等级
RANDOM_EVENT_LEVEL_NAME = 
{
	[1] = "青龙",
	[2] = "朱雀",
	[3] = "白虎",
	[4] = "玄武",
};

RANDOM_LEVEL_NAME = 
{
	"<color=green>青铜<color>",
	"<color=yellow>白银<color>",
	"<color=gold>黄金<color>",
	"<color=pink>翡翠<color>",	
}


--城市mapid
CITY_MAP = 
{
	[1] = 23,
	[2] = 24,
	[3] = 25,
	[4] = 26,
	[5] = 27,
	[6] = 28,
	[7] = 29,
};

AWARD_REPUTE = --家族威望
{
	[1] 	= {10,12,14,16,18,20,22,24,26,28,30,32},
	[2]     = {14,16,18,21,23,26,29,32,36,39,41,43},
	[3] 	= {17,20,22,25,28,32,36,40,45,51,53,55},
	[4]		= {21,23,26,30,34,38,43,48,55,62,64,66},                       
	[5]		= {24,27,30,34,39,44,50,57,64,73,75,77},                       
	[6]		= {28,31,35,39,44,50,57,65,74,84,86,89},                        
	[7]     = {31,35,39,43,49,56,64,73,83,96,98,100},
}

--江湖威望
AWARD_REPUTE_JIANGHU = {5,10,15,20,25,30,30,30,30,30,30,30}

AWARD_COIN_ROOM =	 --每关结束后给的古币
{
	[1] = {7,9,11,13,15,17,19,21,23,25,27,29},
	[2] = {11,13,15,18,20,23,26,29,32,36,38,40},
	[3] = {15,17,20,23,26,29,33,37,42,47,49,51},
	[4] = {19,22,25,28,31,36,40,45,51,58,60,62},
	[5] = {23,26,29,33,37,42,47,54,61,69,71,73},
	[6] = {28,31,34,38,43,48,54,62,70,80,82,84},
	[7] = {32,35,38,43,48,54,61,70,80,91,93,95},
}

AWARD_COIN_RANDOM = --随机给的古币
{
	[1] = 
	{
		{4,4,5,6,6,7,8,9,10,12,12,12},
		{5,6,7,7,8,9,11,12,14,15,16,16},
		{6,7,8,9,10,12,13,15,17,19,20,21},
		{8,9,10,11,13,14,16,18,21,23,24,25},
	},
	[4] = 
	{
		{13,15,16,19,21,24,27,30,34,39,40,41},
		{17,19,22,25,28,32,36,40,46,52,53,55},
		{21,24,27,31,35,40,45,50,57,64,67,69},
		{26,29,33,37,42,47,54,60,68,77,80,82},
	},
	[7] = 
	{
		{22,25,28,32,36,40,45,51,58,66,68,70},
		{29,33,37,42,48,54,61,69,77,88,90,93},
		{36,41,47,53,59,67,76,86,97,109,113,117},
		{44,49,56,63,71,81,91,103,116,131,136,140},
	},
}

AWARD_EXP_SUCESS = --成功加的经验
{
	[1] = 0.30,
	[2] = 0.49,
	[3] = 0.67,
	[4] = 0.86,
	[5] = 1.04,
	[6] = 1.23,
	[7] = 1.41,
}

AWARD_EXP_FAIL = --失败加的经验
{
	[1] = 0.15,
	[2] = 0.24,
	[3] = 0.34,
	[4] = 0.43,
	[5] = 0.52,
	[6] = 0.61,
	[7] = 0.71,
}

AWARD_TIMES=1;

preEnv.setfenv(1, preEnv)	--恢复全局环境